!function(r){"use strict";var e=null,t=r(".rb-dashboard-tab").on("click",function(){e=r(this.hash).removeAttr("id"),location.hash===this.hash&&setTimeout(a,0)}),s=t.map(function(){return this.hash}).get(),i=r(s.join(",")).each(function(){r(this).data("old-id",this.id)});function a(){e&&(e.attr("id",e.data("old-id")),e=null);var a=window.location.hash;-1!==s.indexOf(a)&&n(a)}function n(a){a=a||s[0],t.removeClass("selected").filter(function(){return this.hash===a}).addClass("selected"),i.hide().filter(a).show()}r(window).on("hashchange",a),(-1!==s.indexOf(window.location.hash)?a:n)(),r(".rb-action-links").on("click",".update-now",function(a){var e,t,s,i=r(a.target);a.preventDefault(),i.hasClass("updating-message")||i.hasClass("button-disabled")||(window.wp.updates.maybeRequestFilesystemCredentials(a),a={plugin:i.data("plugin"),slug:i.data("slug")},i=r("#wp-admin-bar-updates"),a=_.extend({success:l,error:o},a),e=r(".plugin-card-"+a.slug),t=e.find(".update-now").addClass("updating-message"),s=rovenblog_args.text_updating+t.data("name"),e.removeClass("plugin-card-update-failed").find(".notice.notice-error").remove(),i.addClass("spin"),t.html()!==rovenblog_args.text_updating2&&t.data("originaltext",t.html()),t.attr("aria-label",s).text(rovenblog_args.text_updating2),d.trigger("wp-plugin-updating",a),window.wp.updates.ajax("update-plugin",a))});var d=r(document);function l(a){var e=r("#wp-admin-bar-updates"),t=r(".plugin-card-"+a.slug).find(".update-now").removeClass("updating-message").addClass("button-disabled updated-message");e.removeClass("spin"),t.attr("aria-label",a.pluginName+rovenblog_args.text_updated2).text(rovenblog_args.text_updated),window.wp.a11y.speak(rovenblog_args.text_update_s),d.trigger("wp-plugin-update-success",a)}function o(a){var e,t,s=r("#wp-admin-bar-updates");window.wp.updates.isValidResponse(a,"update")&&!window.wp.updates.maybeHandleCredentialError(a,"update-plugin")&&(t="Update failed: "+a.errorMessage,r(".plugin-card-"+a.slug+" .rb-dashboard-card-content").addClass("plugin-card-update-failed").append('<div class="notice notice-error rb-notice rb-notice-error is-dismissible"><p>'+t+"</p></div>"),(e=r(".plugin-card-"+a.slug)).find(".update-now").text(rovenblog_args.text_update_f).removeClass("updating-message"),a.pluginName?e.find(".update-now").attr("aria-label",a.pluginName+rovenblog_args.text_update_f2):e.find(".update-now").removeAttr("aria-label"),e.on("click",".notice.is-dismissible .notice-dismiss",function(){setTimeout(function(){e.removeClass("plugin-card-update-failed").find(".column-name a").trigger("focus"),e.find(".update-now").attr("aria-label",!1).text(rovenblog_args.text_update)},200)}),s.removeClass("spin"),window.wp.a11y.speak(t,"assertive"),d.trigger("wp-plugin-update-error",a))}var g;function u(a){var e,t;1==a?(t=r("#wp-admin-bar-updates"),r(".plugin-card-"+g).find(".activate-now").removeClass("updating-message").addClass("button-disabled updated-message").text(rovenblog_args.text_activated),t.removeClass("spin"),"one-click-demo-import"==g&&(r("#rb-demosites-ocdi").removeClass("rb-hide"),r("#rb-demosites-no-ocdi").addClass("rb-hide"),r("#rb-card-demosites-ocdi").removeClass("rb-hide"),r("#rb-card-demosites-no-ocdi").addClass("rb-hide")),"kirki"==g&&(r("#rb-card-customizer-kirki").removeClass("rb-hide"),r("#rb-card-customizer-no-kirki").addClass("rb-hide"))):(t=r("#wp-admin-bar-updates"),r(".plugin-card-"+g+" .rb-dashboard-card-content").addClass("plugin-card-activate-failed").append('<div class="notice notice-error rb-notice rb-notice-error is-dismissible"><p>'+a+'</p><button type="button" class="notice-dismiss rb-dismiss"><span class="screen-reader-text">'+rovenblog_args.text_dismiss+"</span></button></div>"),(e=r(".plugin-card-"+g)).find(".activate-now").text(rovenblog_args.text_activate_f).removeClass("updating-message").attr("disabled","disabled"),e.on("click",".notice.is-dismissible .rb-dismiss",function(){e.find(".notice.notice-error").remove(),setTimeout(function(){e.removeClass("plugin-card-activate-failed").find(".column-name a").trigger("focus"),e.find(".activate-now").attr("aria-label",!1).text(rovenblog_args.text_activate).removeAttr("disabled").removeClass("button-disabled")},200)}),t.removeClass("spin"))}function p(a){var e=r(".plugin-card-"+a.slug).find(".install-now");e.removeClass("updating-message").addClass("updated-message installed button-disabled").attr("aria-label",rovenblog_args.text_installed).text(rovenblog_args.text_installed),window.wp.a11y.speak(rovenblog_args.text_complet_i),d.trigger("wp-plugin-install-success",a),a.activateUrl&&setTimeout(function(){e.removeClass("install-now installed button-disabled updated-message").addClass("activate-now button-primary").attr("href",a.activateUrl),e.trigger("click")},1e3)}function c(a){var e=r(".plugin-card-"+a.slug),t=e.find(".install-now");window.wp.updates.isValidResponse(a,"install")&&!window.wp.updates.maybeHandleCredentialError(a,"install-plugin")&&(e.addClass("plugin-card-update-failed").append('<div class="notice notice-error notice-alt is-dismissible"><p>'+rovenblog_args.text_install_f+a.errorMessage+"</p></div>"),e.on("click",".notice.is-dismissible .notice-dismiss",function(){setTimeout(function(){e.removeClass("plugin-card-update-failed").find(".column-name a").trigger("focus")},200)}),t.removeClass("updating-message").addClass("button-disabled").attr("aria-label",rovenblog_args.text_install_f2).text(rovenblog_args.text_install_f2),window.wp.a11y.speak(void 0,"assertive"),d.trigger("wp-plugin-install-error",a))}r(".rb-action-links").on("click",".activate-now",function(a){var e,t,s,i,n=r(a.target);a.preventDefault(),n.hasClass("updating-message")||n.hasClass("button-disabled")||(a=n.attr("href").substring(n.attr("href").indexOf("_wpnonce=")+9,n.attr("href").lastIndexOf("&action")),e=n.attr("href").substring(n.attr("href").indexOf("plugin=")+7),s=n.attr("href").substring(n.attr("href").indexOf("plugin=")+7,n.attr("href").lastIndexOf("/")),g=s,t=r("#wp-admin-bar-updates"),i=(s=r(".plugin-card-"+s)).find(".activate-now").addClass("updating-message"),s.removeClass("plugin-card-activate-failed").find(".notice.notice-error").remove(),t.addClass("spin"),n.text(rovenblog_args.text_activating).addClass("button-disabled").attr("disabled","disabled"),i.html()!==rovenblog_args.text_activating&&i.data("originaltext",i.html()),r.post(rovenblog_args.rb_ajax_url,{action:"rovenblog_activate_plugin",rb_nonce:a,rb_plugin:e},u))}),r(".rb-action-links").on("click",".install-now",function(a){var e,t=r(a.target);a.preventDefault(),t.hasClass("updating-message")||t.hasClass("button-disabled")||(window.wp.updates.shouldRequestFilesystemCredentials&&!window.wp.updates.ajaxLocked&&(window.wp.updates.requestFilesystemCredentials(a),d.on("credential-modal-cancel",function(){r(".install-now.updating-message").removeClass("updating-message").text(rovenblog_args.text_install),window.wp.a11y.speak(rovenblog_args.text_cancel)})),a={slug:t.data("slug")},t=r(".plugin-card-"+a.slug),e=t.find(".install-now"),a=_.extend({success:p,error:c},a),(e="import"===pagenow?r('[data-slug="'+a.slug+'"]'):e).html()!==rovenblog_args.text_installing&&e.data("originaltext",e.html()),e.addClass("updating-message").attr("aria-label",rovenblog_args.text_installing).text(rovenblog_args.text_installing),window.wp.a11y.speak(rovenblog_args.text_wait_i),t.removeClass("plugin-card-install-failed").find(".notice.notice-error").remove(),d.trigger("wp-plugin-installing",a),window.wp.updates.ajax("install-plugin",a))})}(jQuery);
//# sourceMappingURL=rovenblog-dashboard.min.js.map
